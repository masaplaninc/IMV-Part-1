<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="css/style.css">

    <script src="lib/glMatrix-0.9.5.min.js"></script>
    


    <!-- jquery -->
    <script src="./lib/jquery.js"></script>

    <!-- MIDI -->
    <script src="./lib/jasmid/replayer.js"></script>
    <script src="./lib/jasmid/midifile.js"></script>
    <script src="./lib/jasmid/stream.js"></script>

    <script src="./lib/midi/MIDI/MIDI.js"></script>
    <script src="./lib/midi/Window/DOMLoader.script.js"></script>

    <script src="./lib/midi/inc/Base64.js"></script>
    <script src="./lib/midi/inc/base64binary.js"></script>



    <!-- Own sources -->
    <script src="./js/midi.js"></script>
    <script src="js/core.js" type="text/javascript"></script>
    
    <!-- SKYBOX -->
    <script id="shader-vs-skybox" type="x-shader/x-vertex">
        attribute vec3 aVertexPosition;

        uniform mat4 uMVMatrix; // model-view matrix
        uniform mat4 uPMatrix;  // projection matrix

        varying vec3 vColor;

        void main(void) {
            vColor = aVertexPosition;
            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        }
    </script>

    <script id="shader-fs-skybox" type="x-shader/x-fragment">
        precision mediump float;

        varying vec3 vColor;

        void main(void) {
            gl_FragColor = vec4(vColor, 1.0);
        }
    </script>

    <!-- BALLS -->
    <script id="shader-vs-balls" type="x-shader/x-vertex">
        attribute vec2 aVertexPosition;

        varying vec2 vPos;

        void main(void) {
            // vPos = (aVertexPosition + vec2(1.0)) / 2.0;
            vPos = aVertexPosition;
            gl_Position = vec4(aVertexPosition, 0.0, 1.0);
        }
    </script>

    <script id="shader-fs-balls" type="x-shader/x-fragment">
        precision mediump float;

        varying vec2 vPos;
            
        #define C1 vec4(0.0, 0.0, 0.0, 1.0)
        #define C2 vec4(0.6, 0.2, 0.8, 1.0)
        #define C3 vec4(1.0, 0.55, 0.0, 1.0)
        #define C4 vec4(1.0, 1.0, 0.5, 1.0)

        #define ALPHA 0.5

        void main(void) {
            //gl_FragColor = vec4(mix(C3.xyz, C2.xyz, step(0.05, vPos.x * vPos.x + vPos.y * vPos.y)), ALPHA);
            gl_FragColor = mix(C3, vec4(0.0), step(0.05, vPos.x * vPos.x + vPos.y * vPos.y));
        }
    </script>

</head>

<body onload="start()" onkeypress="checkPressedKey(event)">

<span>
    Load MIDI file:
    <input type="file" id="file_upload"/>
</span>

<button onclick="lowNote()">Send minimal available MIDI note</button><span id="midiLow" class="noMIDI">min = 0</span>
<button onclick="highNote()">Send maximal available MIDI note</button><span id="midiHigh" class="noMIDI">max = 127</span>

<canvas id="glcanvas" width="1280px" height="720px">
    No <code>&lt;canvas&gt;</code> suppport in your browser.
</canvas>

</body>