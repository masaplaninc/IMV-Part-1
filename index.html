<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="css/style.css">


    <script src="lib/glMatrix-0.9.5.min.js"></script>

    <!-- jquery -->
    <script src="./lib/jquery.js"></script>

    <!-- MIDI -->
    <script src="./lib/jasmid/replayer.js"></script>
    <script src="./lib/jasmid/midifile.js"></script>
    <script src="./lib/jasmid/stream.js"></script>

    <script src="./lib/midi/MIDI/MIDI.js"></script>
    <script src="./lib/midi/Window/DOMLoader.script.js"></script>

    <script src="./lib/midi/inc/Base64.js"></script>
    <script src="./lib/midi/inc/base64binary.js"></script>



    <!-- Own sources -->
    <script src="./js/midi.js"></script>
    <script src="js/core.js" type="text/javascript"></script>

    <script id="shader-fs" type="x-shader/x-fragment">
		    precision mediump float;

            varying vec2 pos;

            // fireballs inspired by https://www.shadertoy.com/view/MtXSzS
            #define saturate(oo) clamp(oo, 0.0, 1.0)

            // Quality Settings
            #define MarchSteps 8
            // Scene Settings
            #define RADIUS 2.0
            #define BGCOLOR vec4(0.1, 0.0, 0.7, 1.0)
            // Noise Settings
            #define NoiseSteps 1
            #define NoiseAmplitude 0.06
            float NoiseFrequency = 4.0; // make this into uniform
            #define Animation vec3(0.0, -3.0, 0.5)
            
            #define C1 vec4(0.0, 0.0, 0.0, 1.0)
            #define C2 vec4(0.6, 0.2, 0.8,1.0)
            #define C3 vec4(1.0, 0.55, 0.0,1.0)
            #define C4 vec4(1.0, 1.0, 0.5, 1.0)




		    void main(void) {
                gl_FragColor = vec4(mix(BGCOLOR.xyz, vec3(0.0, 0.0, 0.0), step(pos.x, 0.5)), 1.0);
		    }

    </script>

    <script id="shader-vs" type="x-shader/x-vertex">
		    attribute vec2 aVertexPosition;

            varying vec2 pos;

		    void main(void) {
                pos = (aVertexPosition.xy + vec2(1.0)) / 2.0;
		        gl_Position = vec4(aVertexPosition, 0.0,  1.0);
		    }

    </script>

</head>

<body onload="start()" onkeypress="checkPressedKey(event)">

<span>
    Load MIDI file:
    <input type="file" id="file_upload"/>
</span>

<button onclick="lowNote()">Send lowest MIDI note</button><span id="midiLow">min = 0</span>
<button onclick="highNote()">Send highest MIDI note</button><span id="midiHigh">max = 127</span>

<canvas id="glcanvas" width="1280px" height="720px">
    No <code>&lt;canvas&gt;</code> suppport in your browser.
</canvas>

</body>